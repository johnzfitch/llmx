---
chunk_index: 521
ref: "d84550873188"
id: "d8455087318844bb4f0e7d31769884374b533f27d774cca4e1b0dca546638079"
slug: "phase-4-completion-analysis--what-phase-5-adds"
path: "/home/zack/dev/llmx/docs/PHASE_4_COMPLETION_ANALYSIS.md"
kind: "markdown"
lines: [361, 401]
token_estimate: 240
content_sha256: "099b6298a3a240cc55514b3518e623103c9c5a3399b2b706decbd77f2436e5ca"
compacted: false
heading_path: ["Phase 4 Completion Analysis","Bridge to Phase 5: Semantic Search","What Phase 5 Adds"]
symbol: null
address: null
asset_path: null
---

### What Phase 5 Adds

**New dependencies**:
```toml
[dependencies]
# For embeddings
ort = "1.16"              # ONNX runtime
tokenizers = "0.15"       # For local models

# For vector search
ndarray = "0.15"          # Array operations
```

**New tool** (optional 5th tool):
```rust
#[tool(description = "Semantic search using embeddings")]
async fn llmx_semantic_search(
    &self,
    Parameters(input): Parameters<SemanticSearchInput>,
) -> Result<CallToolResult, McpError>
```

**Or enhance existing tool**:
```rust
pub struct SearchInput {
    pub query: String,
    pub index_name: String,
    pub use_semantic: Option<bool>,  // NEW: Enable hybrid search
    pub limit: Option<usize>,
    pub max_tokens: Option<usize>,
}
```

**Key decision for Phase 5**: 
- Add new tool? (cleaner separation)
- Enhance existing tool? (fewer tools for agents)

**Recommendation**: Enhance existing `llmx_search` with `use_semantic` flag (keeps 4-tool pattern)

---