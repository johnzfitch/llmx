---
chunk_index: 615
ref: "eb7a9b7ce963"
id: "eb7a9b7ce963f0b10b2f7d942206a7601b1cf7e9375befb2f90aaf246d55a410"
slug: "phase-4-polish-checklist--task-2-baseline-benchmarks-2-3-hours"
path: "/home/zack/dev/llmx/docs/PHASE_4_POLISH_CHECKLIST.md"
kind: "markdown"
lines: [54, 134]
token_estimate: 509
content_sha256: "ecaf6f94e231745b3475a88596f823c230b9c1660f2b0f3b9c7bb0630b053302"
compacted: false
heading_path: ["Phase 4 â†’ Phase 5 Transition Checklist","Pre-Phase 5 Tasks","Task 2: Baseline Benchmarks (2-3 hours)"]
symbol: null
address: null
asset_path: null
---

### Task 2: Baseline Benchmarks (2-3 hours)

**Why**: Need performance baseline before adding embedding overhead

**Action**:
```bash
# Create benches/baseline.rs
mkdir -p benches
cat > benches/baseline.rs << 'EOF'
use criterion::{black_box, criterion_group, criterion_main, Criterion};
use ingestor_core::mcp::IndexStore;
use std::path::PathBuf;
use tempfile::tempdir;

fn benchmark_index(c: &mut Criterion) {
    let temp = tempdir().unwrap();
    let store_path = temp.path().to_path_buf();
    
    c.bench_function("index_llmx_codebase", |b| {
        b.iter(|| {
            let mut store = IndexStore::new(store_path.clone()).unwrap();
            let paths = vec!["/home/zack/dev/llmx/ingestor-core/src".to_string()];
            // Index operation here
            black_box(store);
        })
    });
}

fn benchmark_search_cold(c: &mut Criterion) {
    // Setup: Create index first
    let temp = tempdir().unwrap();
    let mut store = IndexStore::new(temp.path()).unwrap();
    // ... create index ...
    
    c.bench_function("search_bm25_cold", |b| {
        b.iter(|| {
            // Search operation
            black_box("authentication");
        })
    });
}

fn benchmark_search_warm(c: &mut Criterion) {
    let temp = tempdir().unwrap();
    let mut store = IndexStore::new(temp.path()).unwrap();
    // ... create index and warm cache ...
    
    c.bench_function("search_bm25_warm", |b| {
        b.iter(|| {
            // Search operation (cache warm)
            black_box("authentication");
        })
    });
}

criterion_group!(benches, benchmark_index, benchmark_search_cold, benchmark_search_warm);
criterion_main!(benches);
EOF

# Add to Cargo.toml
cat >> Cargo.toml << 'EOF'

[[bench]]
name = "baseline"
harness = false
required-features = ["mcp"]
EOF

# Run benchmarks
cargo bench --features mcp
```

**Deliverable**: Baseline metrics captured:
- Index time: ~500ms for llmx codebase
- Search (cold): ~50ms
- Search (warm): ~10ms

**Save these numbers** - Phase 5 will add embedding overhead

---