---
chunk_index: 127
ref: "204b73ef089e"
id: "204b73ef089e7d715da55cecc6d561f176113607d6d9fb43d17bd4a5294a8025"
slug: "agent-handoff--data-structures-phase-5-additions"
path: "/home/zack/dev/llmx/docs/AGENT_HANDOFF.md"
kind: "markdown"
lines: [428, 458]
token_estimate: 185
content_sha256: "3ab4fbf22100559bce47ea64db9cf3bcccd89047f75b99a34d181094e7e31a03"
compacted: false
heading_path: ["Agent Handoff Document","Key Files Reference","Data Structures (Phase 5 additions)"]
symbol: null
address: null
asset_path: null
---

### Data Structures (Phase 5 additions)
```rust
// src/model.rs
pub struct IndexFile {
    pub version: u8,
    pub index_id: String,
    pub files: Vec<FileMeta>,
    pub chunks: Vec<Chunk>,
    pub chunk_refs: BTreeMap<String, ChunkRef>,
    pub inverted_index: BTreeMap<String, PostingList>,
    pub stats: IndexStats,
    pub warnings: Vec<IngestWarning>,

    // Phase 5: Add this
    // pub embeddings: Option<Vec<Vec<f32>>>,  // One per chunk
}

pub struct SearchInput {
    pub query: String,
    pub index_id: String,
    pub filters: Option<SearchFiltersInput>,
    pub limit: Option<usize>,
    pub max_tokens: Option<usize>,

    // Phase 5: Add this
    // pub use_semantic: Option<bool>,  // Enable hybrid search
}
```

---