---
chunk_index: 850
ref: "12b7afe645a2"
id: "12b7afe645a28edf532aa5d8d1c895928bf5d7820a034f1dfcd6ff369b7933aa"
slug: "stable-backport-patches--web-app-js-firefox-warning-for-large-cpu-emb"
path: "/home/zack/dev/llmx/docs/STABLE_BACKPORT_PATCHES.md"
kind: "markdown"
lines: [204, 224]
token_estimate: 132
content_sha256: "7edbff8101f6102d671bc4d802620dad2188d2ff9fa5a1bd7840791e53c02d1e"
compacted: false
heading_path: ["LLMX Stable - Exact Code Patches to Apply","PATCH 4: Firefox Stability (Priority: HIGH if CPU embeddings used)","web/app.js - Firefox warning for large CPU embeddings"]
symbol: null
address: null
asset_path: null
---

### web/app.js - Firefox warning for large CPU embeddings

**Location:** Before buildEmbeddings operation (if it exists)

**ADD:**
```javascript
if (isFirefox && !globalThis.LLMX_ENABLE_WEBGPU && chunkCount > 100) {
  const proceed = confirm(
    `Firefox CPU embeddings with ${chunkCount} chunks may take 10-20 minutes and could crash. ` +
    `Chrome/Edge with WebGPU is recommended. Continue anyway?`
  );
  if (!proceed) {
    return;
  }
}
```

**Impact:** Prevents Firefox crashes, warns users about slow performance

---