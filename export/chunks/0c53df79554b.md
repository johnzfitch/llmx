---
chunk_index: 1109
ref: "0c53df79554b"
id: "0c53df79554b16d2d6ccceef9dba08e66bf58b9a8251ffef8deedeb3adcb5a78"
slug: "filetype-tests-l121-241"
path: "/home/zack/dev/llmx/ingestor-core/tests/filetype_tests.rs"
kind: "text"
lines: [121, 241]
token_estimate: 1014
content_sha256: "11c09e8fd41e5a2eb187f7d00b82eb958520373d8658dc9afae5dd9df42d2158"
compacted: false
heading_path: []
symbol: null
address: null
asset_path: null
---

// ============================================================================
// Documentation
// ============================================================================

#[test]
fn test_filetype_markdown() {
    test_extension_produces_kind(
        "md",
        "# Title\n\n## Section\n\nContent here.",
        ChunkKind::Markdown,
    );
}

#[test]
fn test_filetype_text() {
    test_extension_produces_kind(
        "txt",
        "Plain text content.\nLine two.",
        ChunkKind::Text,
    );
}

// ============================================================================
// Python
// ============================================================================

#[test]
fn test_filetype_python() {
    let input = create_file("py", "def hello():\n    print('Hello')");
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "Python file should be indexed");
}

// ============================================================================
// Go
// ============================================================================

#[test]
fn test_filetype_go() {
    let input = create_file(
        "go",
        "package main\n\nfunc main() {\n    println(\"Hello\")\n}",
    );
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "Go file should be indexed");
}

// ============================================================================
// C/C++
// ============================================================================

#[test_case("c")]
#[test_case("cpp")]
#[test_case("cc")]
#[test_case("cxx")]
#[test_case("h")]
#[test_case("hpp")]
#[test_case("hxx")]
fn test_filetype_c_family(ext: &str) {
    let content = match ext {
        "h" | "hpp" | "hxx" => "#ifndef TEST_H\n#define TEST_H\nvoid test();\n#endif",
        _ => "int main() { return 0; }",
    };
    let input = create_file(ext, content);
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "C/C++ file .{} should be indexed", ext);
}

// ============================================================================
// Java
// ============================================================================

#[test]
fn test_filetype_java() {
    let input = create_file(
        "java",
        "public class Test {\n    public static void main(String[] args) {}\n}",
    );
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "Java file should be indexed");
}

// ============================================================================
// Ruby
// ============================================================================

#[test]
fn test_filetype_ruby() {
    let input = create_file("rb", "def hello\n  puts 'Hello'\nend");
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "Ruby file should be indexed");
}

// ============================================================================
// PHP
// ============================================================================

#[test]
fn test_filetype_php() {
    let input = create_file("php", "<?php\nfunction hello() { echo 'Hello'; }\n?>");
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "PHP file should be indexed");
}

// ============================================================================
// Shell
// ============================================================================

#[test_case("sh")]
#[test_case("bash")]
#[test_case("zsh")]
fn test_filetype_shell(ext: &str) {
    let input = create_file(ext, "#!/bin/bash\necho 'Hello'");
    let index = ingest_files(vec![input], IngestOptions::default());
    assert!(!index.files.is_empty(), "Shell file .{} should be indexed", ext);
}

// ============================================================================
// SQL
// ============================================================================