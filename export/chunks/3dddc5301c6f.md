---
chunk_index: 1099
ref: "3dddc5301c6f"
id: "3dddc5301c6fd9b3ee83a585cabd19b69abf94cb1ee5a5b0b55a83c8e1de4e08"
slug: "cli-tests-l671-732"
path: "/home/zack/dev/llmx/ingestor-core/tests/cli_tests.rs"
kind: "text"
lines: [671, 732]
token_estimate: 401
content_sha256: "d35453f5a9cc5d887dd2d55245dc4e1ef4aee3503898133c36950bac481bc562"
compacted: false
heading_path: []
symbol: null
address: null
asset_path: null
---

#[test]
fn test_cli_get_chunk_not_found() {
    let storage = TempDir::new().unwrap();
    let project = create_test_project();

    llmx()
        .args([
            "index",
            project.path().to_str().unwrap(),
            "--storage-dir",
            storage.path().to_str().unwrap(),
        ])
        .assert()
        .success();

    llmx()
        .args([
            "get",
            "nonexistent-chunk-id",
            "--storage-dir",
            storage.path().to_str().unwrap(),
        ])
        .current_dir(project.path())
        .assert()
        .success() // Command succeeds but outputs "Chunk not found"
        .stderr(predicate::str::contains("Chunk not found"));
}

// ============================================================================
// Global Flags Tests
// ============================================================================

#[test]
fn test_cli_version() {
    llmx()
        .arg("--version")
        .assert()
        .success()
        .stdout(predicate::str::contains("llmx"));
}

#[test]
fn test_cli_help() {
    llmx()
        .arg("--help")
        .assert()
        .success()
        .stdout(predicate::str::contains("index"))
        .stdout(predicate::str::contains("search"))
        .stdout(predicate::str::contains("explore"));
}

#[test]
fn test_cli_subcommand_help() {
    for subcommand in &["index", "search", "explore", "list", "delete", "export", "get"] {
        llmx()
            .args([subcommand, "--help"])
            .assert()
            .success()
            .stdout(predicate::str::contains("Usage"));
    }
}