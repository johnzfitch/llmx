---
chunk_index: 714
ref: "07d6ee6577dd"
id: "07d6ee6577dd21cdcfc985b0e29b13fe6d1d825e18b398a67be4ca773c5c1239"
slug: "post-p6-enhancements--6-predictive-prefetching"
path: "/home/zack/dev/llmx/docs/POST_P6_ENHANCEMENTS.md"
kind: "markdown"
lines: [234, 278]
token_estimate: 290
content_sha256: "a291947b60b1f078cf0b1eda3c51b5983de84221fdec980a0c1e2c51909fffac"
compacted: false
heading_path: ["Post-Phase 6 Enhancements","6. Predictive Prefetching"]
symbol: null
address: null
asset_path: null
---

## 6. Predictive Prefetching

**Observation:** Agents follow patterns:
- Search "authentication" → likely next: "token validation", "login flow"
- Find function X → likely next: "where is X called"

**Solution:** Preload likely next queries during agent think time.

```rust
pub fn predict_next(&self, query: &str) -> Vec<String> {
    let mut candidates = vec![];

    // Pattern: function search → callers
    if let Some(func) = extract_function_name(query) {
        candidates.push(format!("where is {} called", func));
    }

    // Pattern: error → handling
    if query.contains("error") {
        candidates.push("error handling patterns".to_string());
    }

    // Historical patterns
    candidates.extend(self.historical_next_queries(query));

    candidates.into_iter().take(3).collect()
}

pub async fn search_with_prefetch(&mut self, query: &str) -> SearchOutput {
    let results = self.search(query).await?;

    // Background prefetch
    let predicted = self.predict_next(query);
    tokio::spawn(async move {
        for q in predicted {
            let _ = self.search(&q).await;  // Warm cache
        }
    });

    results
}
```

---