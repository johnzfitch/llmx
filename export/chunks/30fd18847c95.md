---
chunk_index: 866
ref: "30fd18847c95"
id: "30fd18847c954d191284913bd95868f25b68b4afc1fe6661778ffa076b70bb62"
slug: "stable-backport-plan--1-1-stale-embeddings-after-selective-update"
path: "/home/zack/dev/llmx/docs/STABLE_BACKPORT_PLAN.md"
kind: "markdown"
lines: [23, 44]
token_estimate: 156
content_sha256: "7e3027cf517629fa6a0ce810899cb17ae341a3a9a48b4d0cf07e3cd739bb5fef"
compacted: false
heading_path: ["LLMX Stable Version - Backport Analysis & Hardening Plan","1. CRITICAL BUG FIXES (Must Apply)","1.1 Stale Embeddings After Selective Update"]
symbol: null
address: null
asset_path: null
---

### 1.1 Stale Embeddings After Selective Update
**Commit:** 908fac7
**Severity:** HIGH
**Impact:** Semantic search returns incorrect results after selective index updates

**Problem:**
When `updateSelective()` modifies the index, embeddings/chunkMeta are not cleared, causing semantic search to use stale vectors that don't match the new index structure.

**Fix Required:**
```javascript
// web/worker.js - After updateSelective call
embeddings = null;
embeddingsMeta = null;
chunkMeta = null;
```

**Files:** `web/worker.js` (3 lines)
**Risk:** Low - Simple null assignment, no side effects
**Priority:** ðŸ”´ CRITICAL

---