---
chunk_index: 1349
ref: "9e3d4897b278"
id: "9e3d4897b2781cbea94ae90754c548e6832fba7e17910c8b08433498e09bd668"
slug: "app--opendb"
path: "/home/zack/dev/llmx/web/app.js"
kind: "java_script"
lines: [839, 851]
token_estimate: 109
content_sha256: "13a41dac5fb3c9f8b8197b8b15ecca6f9cd404863438e9bf90249da647f82f6d"
compacted: false
heading_path: []
symbol: "openDb"
address: null
asset_path: null
---

function openDb() {
  return new Promise((resolve, reject) => {
    const request = indexedDB.open("llmx-ingestor", 1);
    request.onupgradeneeded = () => {
      const db = request.result;
      if (!db.objectStoreNames.contains("indexes")) {
        db.createObjectStore("indexes", { keyPath: "id" });
      }
    };
    request.onsuccess = () => resolve(request.result);
    request.onerror = () => reject(request.error);
  });
}