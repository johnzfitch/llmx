---
chunk_index: 338
ref: "040ead70a8e9"
id: "040ead70a8e9a919d93f6de8bc24b49b8c4825d7444ab4f10c9ad7272a26b1ee"
slug: "phase6-blocker-fixes--updated-build-rs"
path: "/home/zack/dev/llmx/docs/PHASE6_BLOCKER_FIXES.md"
kind: "markdown"
lines: [294, 323]
token_estimate: 186
content_sha256: "b899003199358e9535979cb653ba4e5f2cc471460ee1e51df798269fc3cb47a3"
compacted: false
heading_path: ["Phase 6 Blocker Resolution Guide","Updated build.rs"]
symbol: null
address: null
asset_path: null
---

## Updated build.rs

After conversion, update `build.rs`:

```rust
use std::path::Path;
use std::fs;

fn main() {
    let model_path = Path::new("models/bge-small-en-v1.5-opset13.onnx");
    
    // Download if not exists (use converted model URL)
    if !model_path.exists() {
        println!("cargo:warning=Model not found. Please run: python convert_opset.py");
        println!("cargo:warning=Or download pre-converted model from your CDN");
        return;
    }

    // Generate Burn model code
    burn_import::onnx::ModelGen::new()
        .input(model_path.to_str().unwrap())
        .out_dir("src/model/")
        .run_from_script();
        
    println!("cargo:rerun-if-changed=models/bge-small-en-v1.5-opset13.onnx");
}
```

---