---
chunk_index: 374
ref: "4cf5591e1ad5"
id: "4cf5591e1ad5618d0001646df683e6ff4d221e32e9566c5eb8b3fa11099a01ed"
slug: "phase6-implementation--embedding-model-versioning"
path: "/home/zack/dev/llmx/docs/PHASE6_IMPLEMENTATION.md"
kind: "markdown"
lines: [122, 140]
token_estimate: 154
content_sha256: "e1b6a7913e5194c99843d0072af8b900167ab75bdd5d2d948b4a161af0d3b6dc"
compacted: false
heading_path: ["Phase 6 Implementation: Burn + WebGPU Embeddings","Backward Compatibility","Embedding Model Versioning"]
symbol: null
address: null
asset_path: null
---

### Embedding Model Versioning

Indexes now track their embedding model:

```rust
pub struct IndexFile {
    // ... existing fields ...
    pub embeddings: Option<Vec<Vec<f32>>>,
    pub embedding_model: Option<String>, // "hash-based-v1" | "bge-small-en-v1.5" | null
}
```

**Search behavior:**
- `embedding_model = "hash-based-v1"` → Use hash-based embeddings (Phase 5)
- `embedding_model = "bge-small-en-v1.5"` → Use Burn embeddings (Phase 6)
- `embedding_model = null` → BM25-only search (pre-Phase 5)

**Never mix embeddings across models** - cosine similarity is meaningless across different embedding spaces.