---
chunk_index: 581
ref: "a71860c2f842"
id: "a71860c2f8421d59e4a24980edbeeba038f53fb2fc5bb68f9694ebdf8cacd340"
slug: "phase-4-directions--3-simplify-state-management"
path: "/home/zack/dev/llmx/docs/PHASE_4_DIRECTIONS.md"
kind: "markdown"
lines: [60, 70]
token_estimate: 117
content_sha256: "cdf7c9aed0a16956271f44f17433593aacf4d015f0750ffb56d2d050b293ab34"
compacted: false
heading_path: ["Phase 4: MCP Server Implementation & Tool Consolidation","Primary Objectives","3. Simplify State Management"]
symbol: null
address: null
asset_path: null
---

### 3. Simplify State Management
**Current**: `Arc<Mutex<IndexStore>>` - unnecessary for single-threaded stdio MCP server

**Action**:
- [ ] Remove `Arc<Mutex<>>` wrapper
- [ ] Use plain `HashMap<String, IndexFile>` 
- [ ] Change methods to `&mut self` where needed
- [ ] Let tokio runtime handle async I/O (no manual concurrency needed)

**Rationale**: stdio is inherently serial. The mutex adds cognitive overhead and potential deadlock surface with zero benefit.