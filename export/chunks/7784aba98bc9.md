---
chunk_index: 1111
ref: "7784aba98bc9"
id: "7784aba98bc9a5c6e1f43c585b7a67c80087d18ea488d618806057f12dd4d612"
slug: "filetype-tests-l347-394"
path: "/home/zack/dev/llmx/ingestor-core/tests/filetype_tests.rs"
kind: "text"
lines: [347, 394]
token_estimate: 410
content_sha256: "2d0aff3d91376ebf5401b80bee194974c1127154e916000e477246ecf61e72bb"
compacted: false
heading_path: []
symbol: null
address: null
asset_path: null
---

// ============================================================================
// Fixture File Tests
// ============================================================================

#[test]
fn test_fixture_files_index_correctly() {
    // Test that our fixture files are valid
    let fixtures = [
        ("filetypes/rust/sample.rs", ChunkKind::Unknown),
        ("filetypes/javascript/sample.js", ChunkKind::JavaScript),
        ("filetypes/javascript/sample.ts", ChunkKind::JavaScript),
        ("filetypes/web/sample.html", ChunkKind::Html),
        ("filetypes/data/sample.json", ChunkKind::Json),
        ("filetypes/docs/sample.md", ChunkKind::Markdown),
        ("filetypes/docs/sample.txt", ChunkKind::Text),
    ];

    for (fixture_path, expected_kind) in fixtures {
        let full_path = std::path::PathBuf::from(env!("CARGO_MANIFEST_DIR"))
            .join("tests/fixtures")
            .join(fixture_path);

        if !full_path.exists() {
            continue; // Skip if fixture doesn't exist yet
        }

        let data = std::fs::read(&full_path).unwrap();
        let input = FileInput {
            path: fixture_path.to_string(),
            data,
            mtime_ms: None,
            fingerprint_sha256: None,
        };

        let index = ingest_files(vec![input], IngestOptions::default());

        assert!(
            !index.files.is_empty(),
            "Fixture {} should be indexed",
            fixture_path
        );
        assert_eq!(
            index.files[0].kind, expected_kind,
            "Fixture {} should have kind {:?}",
            fixture_path, expected_kind
        );
    }
}