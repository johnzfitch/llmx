---
chunk_index: 297
ref: "06828d6b51af"
id: "06828d6b51af8067f6c1033d4ec06d193a91460378c4781cfa9abfcce8c4bba2"
slug: "p6-directions--model-weight-distribution"
path: "/home/zack/dev/llmx/docs/P6_DIRECTIONS.md"
kind: "markdown"
lines: [255, 282]
token_estimate: 198
content_sha256: "e37337db839b4b365e711adbdbbe19a857e7325cfbe5882287716241d1b2c2e2"
compacted: false
heading_path: ["Phase 6: Burn + WebGPU Embeddings & Advanced Hybrid Search","4. Browser-Specific Concerns","Model Weight Distribution"]
symbol: null
address: null
asset_path: null
---

### Model Weight Distribution
Options for getting model weights to browser:
1. **CDN fetch** - Load from HuggingFace or your CDN on first use
2. **IndexedDB cache** - Cache weights after first download
3. **WASM bundle** - Embed small models directly (increases bundle size)

Recommended: CDN + IndexedDB cache.

```rust
async fn load_or_fetch_weights() -> Result<Vec<u8>> {
    // Check IndexedDB first
    if let Some(cached) = idb_get("bge-small-weights").await? {
        return Ok(cached);
    }
    
    // Fetch from CDN
    let weights = fetch("https://huggingface.co/BAAI/bge-small-en-v1.5/resolve/main/model.safetensors")
        .await?
        .bytes()
        .await?;
    
    // Cache for next time
    idb_set("bge-small-weights", &weights).await?;
    
    Ok(weights)
}
```