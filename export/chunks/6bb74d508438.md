---
chunk_index: 1335
ref: "6bb74d508438"
id: "6bb74d508438ba3adaa25e3bddd35a1d02f45342e9367cbecfbb47a59318ae5e"
slug: "app--collectfilesfrominput"
path: "/home/zack/dev/llmx/web/app.js"
kind: "java_script"
lines: [274, 296]
token_estimate: 153
content_sha256: "6dbf36e51e0d8716eaaf62aa21944553942ec33129cc626dcf80811c626fc0ab"
compacted: false
heading_path: []
symbol: "collectFilesFromInput"
address: null
asset_path: null
---

async function collectFilesFromInput(fileList) {
  const entries = [];
  let totalBytes = 0;
  let skippedLarge = 0;
  let skippedTotal = 0;
  for (const file of fileList) {
    const path = file.webkitRelativePath || file.name;
    if (!isAllowedPath(path)) {
      continue;
    }
    if (file.size > DEFAULT_LIMITS.maxFileBytes) {
      skippedLarge += 1;
      continue;
    }
    if (totalBytes + file.size > DEFAULT_LIMITS.maxTotalBytes) {
      skippedTotal += 1;
      continue;
    }
    entries.push({ path, file });
    totalBytes += file.size;
  }
  return { entries, skippedLarge, skippedTotal };
}