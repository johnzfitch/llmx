---
chunk_index: 846
ref: "66fa2cf353aa"
id: "66fa2cf353aae31dd7b55156b2281d6f2252a586492023e6f19eb5b885981338"
slug: "stable-backport-patches--web-worker-js-firefox-browser-detection"
path: "/home/zack/dev/llmx/docs/STABLE_BACKPORT_PATCHES.md"
kind: "markdown"
lines: [142, 159]
token_estimate: 116
content_sha256: "efb2808632a4d65b56362aee82819b621dc3fec31a1622055044f212ac3fba03"
compacted: false
heading_path: ["LLMX Stable - Exact Code Patches to Apply","PATCH 4: Firefox Stability (Priority: HIGH if CPU embeddings used)","web/worker.js - Firefox browser detection"]
symbol: null
address: null
asset_path: null
---

### web/worker.js - Firefox browser detection

**Location:** Top of file, after URL params section (~line 16)

**ADD:**
```javascript
const isFirefox = (() => {
  const ua = (self.navigator && self.navigator.userAgent) || "";
  return ua.includes("Firefox/") && !ua.includes("Seamonkey/");
})();
const isFirefoxNightly = (() => {
  const ua = (self.navigator && self.navigator.userAgent) || "";
  return /Firefox\/[0-9]+(\.[0-9]+)*a1\b/.test(ua);
})();
```

---